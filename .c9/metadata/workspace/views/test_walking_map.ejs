{"filter":false,"title":"test_walking_map.ejs","tooltip":"/views/test_walking_map.ejs","undoManager":{"mark":92,"position":92,"stack":[[{"start":{"row":0,"column":0},"end":{"row":146,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<html lang=\"en\">","  <head>","    <meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no\">","    <meta charset=\"utf-8\">","    <title>Directions service (complex)</title>","    <style>","      /* Always set the map height explicitly to define the size of the div","       * element that contains the map. */","      #map {","        height: 100%;","      }","      /* Optional: Makes the sample page fill the window. */","      html, body {","        height: 100%;","        margin: 0;","        padding: 0;","      }","      #floating-panel {","        position: absolute;","        top: 10px;","        left: 25%;","        z-index: 5;","        background-color: #fff;","        padding: 5px;","        border: 1px solid #999;","        text-align: center;","        font-family: 'Roboto','sans-serif';","        line-height: 30px;","        padding-left: 10px;","      }","      #warnings-panel {","        width: 100%;","        height:10%;","        text-align: center;","      }","    </style>","  </head>","  <body>","    <div id=\"floating-panel\">","    <b>Start: </b>","    <select id=\"start\">","      <option value=\"penn station, new york, ny\">Penn Station</option>","      <option value=\"grand central station, new york, ny\">Grand Central Station</option>","      <option value=\"625 8th Avenue, New York, NY, 10018\">Port Authority Bus Terminal</option>","      <option value=\"staten island ferry terminal, new york, ny\">Staten Island Ferry Terminal</option>","      <option value=\"101 E 125th Street, New York, NY\">Harlem - 125th St Station</option>","    </select>","    <b>End: </b>","    <select id=\"end\">","      <option value=\"260 Broadway New York NY 10007\">City Hall</option>","      <option value=\"W 49th St & 5th Ave, New York, NY 10020\">Rockefeller Center</option>","      <option value=\"moma, New York, NY\">MOMA</option>","      <option value=\"350 5th Ave, New York, NY, 10118\">Empire State Building</option>","      <option value=\"253 West 125th Street, New York, NY\">Apollo Theater</option>","      <option value=\"1 Wall St, New York, NY\">Wall St</option>","    </select>","    </div>","    <div id=\"map\"></div>","    &nbsp;","    <div id=\"warnings-panel\"></div>","    <script>","      function initMap() {","        var markerArray = [];","","        // Instantiate a directions service.","        var directionsService = new google.maps.DirectionsService;","","        // Create a map and center it on Manhattan.","        var map = new google.maps.Map(document.getElementById('map'), {","          zoom: 13,","          center: {lat: 40.771, lng: -73.974}","        });","","        // Create a renderer for directions and bind it to the map.","        var directionsDisplay = new google.maps.DirectionsRenderer({map: map});","","        // Instantiate an info window to hold step text.","        var stepDisplay = new google.maps.InfoWindow;","","        // Display the route between the initial start and end selections.","        calculateAndDisplayRoute(","            directionsDisplay, directionsService, markerArray, stepDisplay, map);","        // Listen to change events from the start and end lists.","        var onChangeHandler = function() {","          calculateAndDisplayRoute(","              directionsDisplay, directionsService, markerArray, stepDisplay, map);","        };","        document.getElementById('start').addEventListener('change', onChangeHandler);","        document.getElementById('end').addEventListener('change', onChangeHandler);","      }","","      function calculateAndDisplayRoute(directionsDisplay, directionsService,","          markerArray, stepDisplay, map) {","        // First, remove any existing markers from the map.","        for (var i = 0; i < markerArray.length; i++) {","          markerArray[i].setMap(null);","        }","","        // Retrieve the start and end locations and create a DirectionsRequest using","        // WALKING directions.","        directionsService.route({","          origin: document.getElementById('start').value,","          destination: document.getElementById('end').value,","          travelMode: 'WALKING'","        }, function(response, status) {","          // Route the directions and pass the response to a function to create","          // markers for each step.","          if (status === 'OK') {","            document.getElementById('warnings-panel').innerHTML =","                '<b>' + response.routes[0].warnings + '</b>';","            directionsDisplay.setDirections(response);","            showSteps(response, markerArray, stepDisplay, map);","          } else {","            window.alert('Directions request failed due to ' + status);","          }","        });","      }","","      function showSteps(directionResult, markerArray, stepDisplay, map) {","        // For each step, place a marker, and add the text to the marker's infowindow.","        // Also attach the marker to an array so we can keep track of it and remove it","        // when calculating new routes.","        var myRoute = directionResult.routes[0].legs[0];","        for (var i = 0; i < myRoute.steps.length; i++) {","          var marker = markerArray[i] = markerArray[i] || new google.maps.Marker;","          marker.setMap(map);","          marker.setPosition(myRoute.steps[i].start_location);","          attachInstructionText(","              stepDisplay, marker, myRoute.steps[i].instructions, map);","        }","      }","","      function attachInstructionText(stepDisplay, marker, text, map) {","        google.maps.event.addListener(marker, 'click', function() {","          // Open an info window when the marker is clicked on, containing the text","          // of the step.","          stepDisplay.setContent(text);","          stepDisplay.open(map, marker);","        });","      }","    </script>","    <script async defer","    src=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyCl1u3GqcX0yRLCGsKX0guO3q1tqEIeJ9k&callback=initMap\">","    </script>","  </body>","</html>"],"id":1}],[{"start":{"row":39,"column":0},"end":{"row":57,"column":10},"action":"remove","lines":["    <div id=\"floating-panel\">","    <b>Start: </b>","    <select id=\"start\">","      <option value=\"penn station, new york, ny\">Penn Station</option>","      <option value=\"grand central station, new york, ny\">Grand Central Station</option>","      <option value=\"625 8th Avenue, New York, NY, 10018\">Port Authority Bus Terminal</option>","      <option value=\"staten island ferry terminal, new york, ny\">Staten Island Ferry Terminal</option>","      <option value=\"101 E 125th Street, New York, NY\">Harlem - 125th St Station</option>","    </select>","    <b>End: </b>","    <select id=\"end\">","      <option value=\"260 Broadway New York NY 10007\">City Hall</option>","      <option value=\"W 49th St & 5th Ave, New York, NY 10020\">Rockefeller Center</option>","      <option value=\"moma, New York, NY\">MOMA</option>","      <option value=\"350 5th Ave, New York, NY, 10118\">Empire State Building</option>","      <option value=\"253 West 125th Street, New York, NY\">Apollo Theater</option>","      <option value=\"1 Wall St, New York, NY\">Wall St</option>","    </select>","    </div>"],"id":2}],[{"start":{"row":38,"column":8},"end":{"row":39,"column":0},"action":"remove","lines":["",""],"id":3}],[{"start":{"row":69,"column":8},"end":{"row":69,"column":11},"action":"insert","lines":["// "],"id":4},{"start":{"row":70,"column":8},"end":{"row":70,"column":11},"action":"insert","lines":["// "]}],[{"start":{"row":65,"column":8},"end":{"row":65,"column":11},"action":"insert","lines":["// "],"id":5},{"start":{"row":66,"column":8},"end":{"row":66,"column":11},"action":"insert","lines":["// "]},{"start":{"row":67,"column":8},"end":{"row":67,"column":11},"action":"insert","lines":["// "]},{"start":{"row":68,"column":8},"end":{"row":68,"column":11},"action":"insert","lines":["// "]}],[{"start":{"row":52,"column":29},"end":{"row":52,"column":30},"action":"remove","lines":["1"],"id":8}],[{"start":{"row":52,"column":28},"end":{"row":52,"column":29},"action":"remove","lines":["7"],"id":9}],[{"start":{"row":52,"column":27},"end":{"row":52,"column":28},"action":"remove","lines":["7"],"id":10}],[{"start":{"row":52,"column":26},"end":{"row":52,"column":27},"action":"remove","lines":["."],"id":11}],[{"start":{"row":52,"column":25},"end":{"row":52,"column":26},"action":"remove","lines":["0"],"id":12}],[{"start":{"row":52,"column":24},"end":{"row":52,"column":25},"action":"remove","lines":["4"],"id":13}],[{"start":{"row":52,"column":24},"end":{"row":52,"column":25},"action":"insert","lines":["u"],"id":14}],[{"start":{"row":52,"column":25},"end":{"row":52,"column":26},"action":"insert","lines":["s"],"id":15}],[{"start":{"row":52,"column":26},"end":{"row":52,"column":27},"action":"insert","lines":["e"],"id":16}],[{"start":{"row":52,"column":27},"end":{"row":52,"column":28},"action":"insert","lines":["r"],"id":17}],[{"start":{"row":52,"column":28},"end":{"row":52,"column":29},"action":"insert","lines":["l"],"id":18}],[{"start":{"row":52,"column":28},"end":{"row":52,"column":29},"action":"remove","lines":["l"],"id":19}],[{"start":{"row":52,"column":28},"end":{"row":52,"column":29},"action":"insert","lines":["l"],"id":20}],[{"start":{"row":52,"column":29},"end":{"row":52,"column":30},"action":"insert","lines":["a"],"id":21}],[{"start":{"row":52,"column":30},"end":{"row":52,"column":31},"action":"insert","lines":["t"],"id":22}],[{"start":{"row":52,"column":30},"end":{"row":52,"column":31},"action":"remove","lines":["t"],"id":23}],[{"start":{"row":52,"column":29},"end":{"row":52,"column":30},"action":"remove","lines":["a"],"id":24}],[{"start":{"row":52,"column":28},"end":{"row":52,"column":29},"action":"remove","lines":["l"],"id":25}],[{"start":{"row":52,"column":28},"end":{"row":52,"column":29},"action":"insert","lines":["L"],"id":26}],[{"start":{"row":52,"column":29},"end":{"row":52,"column":30},"action":"insert","lines":["a"],"id":27}],[{"start":{"row":52,"column":30},"end":{"row":52,"column":31},"action":"insert","lines":["t"],"id":28}],[{"start":{"row":52,"column":38},"end":{"row":52,"column":45},"action":"remove","lines":["-73.974"],"id":29},{"start":{"row":52,"column":38},"end":{"row":52,"column":39},"action":"insert","lines":["u"]}],[{"start":{"row":52,"column":39},"end":{"row":52,"column":40},"action":"insert","lines":["s"],"id":30}],[{"start":{"row":52,"column":40},"end":{"row":52,"column":41},"action":"insert","lines":["e"],"id":31}],[{"start":{"row":52,"column":41},"end":{"row":52,"column":42},"action":"insert","lines":["r"],"id":32}],[{"start":{"row":52,"column":42},"end":{"row":52,"column":43},"action":"insert","lines":["L"],"id":33}],[{"start":{"row":52,"column":43},"end":{"row":52,"column":44},"action":"insert","lines":["o"],"id":34}],[{"start":{"row":52,"column":44},"end":{"row":52,"column":45},"action":"insert","lines":["n"],"id":35}],[{"start":{"row":52,"column":45},"end":{"row":52,"column":46},"action":"insert","lines":["g"],"id":36}],[{"start":{"row":83,"column":18},"end":{"row":83,"column":56},"action":"remove","lines":["document.getElementById('start').value"],"id":37}],[{"start":{"row":83,"column":18},"end":{"row":83,"column":19},"action":"insert","lines":["s"],"id":38}],[{"start":{"row":83,"column":19},"end":{"row":83,"column":20},"action":"insert","lines":["t"],"id":39}],[{"start":{"row":83,"column":19},"end":{"row":83,"column":20},"action":"remove","lines":["t"],"id":44}],[{"start":{"row":83,"column":18},"end":{"row":83,"column":19},"action":"remove","lines":["s"],"id":45}],[{"start":{"row":43,"column":26},"end":{"row":44,"column":0},"action":"insert","lines":["",""],"id":46},{"start":{"row":44,"column":0},"end":{"row":44,"column":10},"action":"insert","lines":["          "]}],[{"start":{"row":44,"column":10},"end":{"row":45,"column":0},"action":"insert","lines":["",""],"id":47},{"start":{"row":45,"column":0},"end":{"row":45,"column":10},"action":"insert","lines":["          "]}],[{"start":{"row":45,"column":9},"end":{"row":45,"column":10},"action":"remove","lines":[" "],"id":50}],[{"start":{"row":45,"column":8},"end":{"row":45,"column":9},"action":"remove","lines":[" "],"id":51}],[{"start":{"row":45,"column":4},"end":{"row":45,"column":8},"action":"remove","lines":["    "],"id":52}],[{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"remove","lines":["    "],"id":53}],[{"start":{"row":44,"column":10},"end":{"row":45,"column":0},"action":"remove","lines":["",""],"id":54}],[{"start":{"row":44,"column":9},"end":{"row":44,"column":10},"action":"remove","lines":[" "],"id":55}],[{"start":{"row":44,"column":8},"end":{"row":44,"column":9},"action":"remove","lines":[" "],"id":56}],[{"start":{"row":44,"column":4},"end":{"row":44,"column":8},"action":"remove","lines":["    "],"id":57}],[{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"remove","lines":["    "],"id":58}],[{"start":{"row":43,"column":26},"end":{"row":44,"column":0},"action":"remove","lines":["",""],"id":59}],[{"start":{"row":83,"column":18},"end":{"row":83,"column":19},"action":"insert","lines":["o"],"id":60}],[{"start":{"row":83,"column":19},"end":{"row":83,"column":20},"action":"insert","lines":["r"],"id":61}],[{"start":{"row":83,"column":20},"end":{"row":83,"column":21},"action":"insert","lines":["i"],"id":62}],[{"start":{"row":83,"column":21},"end":{"row":83,"column":22},"action":"insert","lines":["g"],"id":63}],[{"start":{"row":83,"column":22},"end":{"row":83,"column":23},"action":"insert","lines":["i"],"id":64}],[{"start":{"row":83,"column":18},"end":{"row":83,"column":23},"action":"remove","lines":["origi"],"id":65},{"start":{"row":83,"column":18},"end":{"row":83,"column":32},"action":"insert","lines":["origin_address"]}],[{"start":{"row":124,"column":53},"end":{"row":124,"column":92},"action":"remove","lines":["AIzaSyCl1u3GqcX0yRLCGsKX0guO3q1tqEIeJ9k"],"id":66},{"start":{"row":124,"column":53},"end":{"row":124,"column":92},"action":"insert","lines":["AIzaSyDU-JY9CP6t-A6tBjSsvamsBiRg0hgY2T4"]}],[{"start":{"row":83,"column":18},"end":{"row":83,"column":19},"action":"insert","lines":["<"],"id":67}],[{"start":{"row":83,"column":19},"end":{"row":83,"column":20},"action":"insert","lines":["%"],"id":68}],[{"start":{"row":83,"column":20},"end":{"row":83,"column":21},"action":"insert","lines":[" "],"id":69}],[{"start":{"row":83,"column":20},"end":{"row":83,"column":21},"action":"insert","lines":["="],"id":70}],[{"start":{"row":83,"column":36},"end":{"row":83,"column":37},"action":"insert","lines":[" "],"id":71}],[{"start":{"row":83,"column":37},"end":{"row":83,"column":38},"action":"insert","lines":["%"],"id":72}],[{"start":{"row":83,"column":38},"end":{"row":83,"column":39},"action":"insert","lines":[">"],"id":73}],[{"start":{"row":84,"column":22},"end":{"row":84,"column":59},"action":"remove","lines":[" document.getElementById('end').value"],"id":74}],[{"start":{"row":84,"column":22},"end":{"row":84,"column":23},"action":"insert","lines":[" "],"id":75}],[{"start":{"row":84,"column":23},"end":{"row":84,"column":24},"action":"insert","lines":["<"],"id":76}],[{"start":{"row":84,"column":24},"end":{"row":84,"column":25},"action":"insert","lines":["%"],"id":77}],[{"start":{"row":84,"column":25},"end":{"row":84,"column":26},"action":"insert","lines":["="],"id":78}],[{"start":{"row":84,"column":26},"end":{"row":84,"column":27},"action":"insert","lines":[" "],"id":79}],[{"start":{"row":84,"column":27},"end":{"row":84,"column":28},"action":"insert","lines":["e"],"id":80}],[{"start":{"row":84,"column":27},"end":{"row":84,"column":28},"action":"remove","lines":["e"],"id":81}],[{"start":{"row":84,"column":27},"end":{"row":84,"column":28},"action":"insert","lines":["d"],"id":82}],[{"start":{"row":84,"column":28},"end":{"row":84,"column":29},"action":"insert","lines":["e"],"id":83}],[{"start":{"row":84,"column":29},"end":{"row":84,"column":30},"action":"insert","lines":["s"],"id":84}],[{"start":{"row":84,"column":30},"end":{"row":84,"column":31},"action":"insert","lines":["t"],"id":85}],[{"start":{"row":84,"column":31},"end":{"row":84,"column":32},"action":"insert","lines":["i"],"id":86}],[{"start":{"row":84,"column":32},"end":{"row":84,"column":33},"action":"insert","lines":["n"],"id":87}],[{"start":{"row":84,"column":33},"end":{"row":84,"column":34},"action":"insert","lines":["a"],"id":88}],[{"start":{"row":84,"column":34},"end":{"row":84,"column":35},"action":"insert","lines":["t"],"id":89}],[{"start":{"row":84,"column":35},"end":{"row":84,"column":36},"action":"insert","lines":["i"],"id":90}],[{"start":{"row":84,"column":36},"end":{"row":84,"column":37},"action":"insert","lines":["o"],"id":91}],[{"start":{"row":84,"column":37},"end":{"row":84,"column":38},"action":"insert","lines":["n"],"id":92}],[{"start":{"row":84,"column":38},"end":{"row":84,"column":39},"action":"insert","lines":[" "],"id":93}],[{"start":{"row":84,"column":39},"end":{"row":84,"column":40},"action":"insert","lines":["%"],"id":94}],[{"start":{"row":84,"column":40},"end":{"row":84,"column":41},"action":"insert","lines":["?"],"id":95}],[{"start":{"row":84,"column":40},"end":{"row":84,"column":41},"action":"remove","lines":["?"],"id":96}],[{"start":{"row":84,"column":40},"end":{"row":84,"column":41},"action":"insert","lines":[">"],"id":97}],[{"start":{"row":83,"column":26},"end":{"row":83,"column":35},"action":"remove","lines":["in_addres"],"id":98}],[{"start":{"row":83,"column":26},"end":{"row":83,"column":27},"action":"remove","lines":["s"],"id":99}],[{"start":{"row":83,"column":26},"end":{"row":83,"column":27},"action":"insert","lines":["i"],"id":100}],[{"start":{"row":83,"column":27},"end":{"row":83,"column":28},"action":"insert","lines":["n"],"id":101}]]},"ace":{"folds":[],"scrolltop":183,"scrollleft":0,"selection":{"start":{"row":119,"column":40},"end":{"row":119,"column":40},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1517741357038,"hash":"b4ac2fd128ae245c236db2725b81e425d328b8da"}